---

description: "该工具函数用于便捷地向边数组添加新边，同时会执行验证以确保不会添加无效边或重复边"
---

# addEdge()

[GitHub源码](https://github.com/xyflow/xyflow/blob/main/packages/system/src/utils/edges/general.ts/#L100)

该工具函数用于便捷地向边数组添加新的[`Edge`](/api-reference/types/edge)，同时会执行验证以确保不会添加无效边或重复边。

```js
import { useCallback } from 'react';
import {
  ReactFlow,
  addEdge,
  useNodesState,
  useEdgesState,
} from '@xyflow/react';

export default function Flow() {
  const [nodes, setNodes, onNodesChange] = useNodesState([]);
  const [edges, setEdges, onEdgesChange] = useEdgesState([]);
  const onConnect = useCallback(
    (connection) => {
      setEdges((oldEdges) => addEdge(connection, oldEdges));
    },
    [setEdges],
  );

  return <ReactFlow nodes={nodes} edges={edges} onConnect={onConnect} />;
}
```

## 签名

<APIDocs functionName="addEdge" />

## 注意事项

- 如果已存在具有相同`target`和`source`的边（若设置了`targetHandle`和`sourceHandle`则还需相同），即使`id`属性不同，该工具也不会添加新边