---

description: '该钩子返回一个 ReactFlowInstance 实例，可用于更新节点与边、操作视口或查询流程的当前状态。'
---

# useReactFlow()

[GitHub 源码](https://github.com/xyflow/xyflow/blob/main/packages/react/src/hooks/useReactFlow.ts)

该钩子返回一个 [`ReactFlowInstance`](/api-reference/types/react-flow-instance) 实例，可用于：
- 更新节点与边
- 操作视口
- 查询流程的当前状态

```jsx
import { useCallback, useState } from 'react';
import { useReactFlow } from '@xyflow/react';

export function NodeCounter() {
  const reactFlow = useReactFlow();
  const [count, setCount] = useState(0);
  const countNodes = useCallback(() => {
    setCount(reactFlow.getNodes().length);
    // you need to pass it as a dependency if you are using it with useEffect or useCallback
    // because at the first render, it's not initialized yet and some functions might not work.
  }, [reactFlow]);

  return (
    <div>
      <button onClick={countNodes}>Update count</button>
      <p>There are {count} nodes in the flow.</p>
    </div>
  );
}
```

## 签名

<APIDocs functionName="useReactFlow" />

## TypeScript

此钩子接受自定义节点和边类型的泛型参数。详见 [TypeScript 指南](/learn/advanced-use/typescript#nodetype-edgetype-unions) 中的相关章节。

```tsx
const reactFlow = useReactFlow<CustomNodeType, CustomEdgeType>();
```

## 注意事项

- 该钩子只能在 [`<ReactFlowProvider />`](/api-reference/react-flow-provider) 或 [`<ReactFlow />`](/api-reference/react-flow) 组件的子组件中使用
- 与 [`useNodes`](/api-reference/hooks/use-nodes) 或 [`useEdges`](/api-reference/hooks/use-edges) 不同，此钩子不会在状态变更时触发组件重新渲染。您可以通过调用返回的 [`ReactFlowInstance`](/api-reference/types/react-flow-instance) 上的方法来按需查询状态