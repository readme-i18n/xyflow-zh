---

description: '该钩子函数允许您监听节点和边选择状态的变化。顾名思义，每当节点或边的选择状态发生变化时，您提供的回调函数就会被调用。'
---

# useOnSelectionChange()

[Source on GitHub](https://github.com/xyflow/xyflow/blob/main/packages/react/src/hooks/useOnSelectionChange.ts)

该钩子函数允许您监听节点和边选择状态的变化。顾名思义，每当_任意_节点或边的选择状态发生变化时，您提供的回调函数就会被调用。

> [!WARNING]
>
> 必须对传入的 `onChange` 处理函数进行记忆化(memoize)处理，否则该钩子将无法正常工作。

```jsx
import { useState } from 'react';
import { ReactFlow, useOnSelectionChange } from '@xyflow/react';

function SelectionDisplay() {
  const [selectedNodes, setSelectedNodes] = useState([]);
  const [selectedEdges, setSelectedEdges] = useState([]);

  // the passed handler has to be memoized, otherwise the hook will not work correctly
  const onChange = useCallback(({ nodes, edges }) => {
    setSelectedNodes(nodes.map((node) => node.id));
    setSelectedEdges(edges.map((edge) => edge.id));
  }, []);

  useOnSelectionChange({
    onChange,
  });

  return (
    <div>
      <p>Selected nodes: {selectedNodes.join(', ')}</p>
      <p>Selected edges: {selectedEdges.join(', ')}</p>
    </div>
  );
}
```

## 签名

<APIDocs functionName="useOnSelectionChange" />

## 注意事项

- 该钩子只能在 [`<ReactFlowProvider />`](/api-reference/react-flow-provider) 或 [`<ReactFlow />`](/api-reference/react-flow) 组件的子组件中使用。