---

description: React Flow 自带一套极简的默认主题。通常开发者会使用自定义 CSS 或 TailwindCSS 等第三方库来覆盖默认样式。
---

import { Callout } from 'nextra/components';
import { RemoteCodeViewer } from 'xy-shared/server';

# 主题定制

React Flow 在设计时就充分考虑了深度定制需求。许多用户会完全改变 React Flow 的视觉风格以匹配自身品牌或设计系统。本指南将介绍多种自定义 React Flow 外观的方法。

## 默认样式

React Flow 的默认样式足以支持内置节点的基本展示。这些样式为内边距、边框圆角和边缘动画等提供了合理的默认值。效果如下所示：

<RemoteCodeViewer
  route="examples/styling/default-style"
  framework="react"
/>

通常你需要在 `App.jsx` 文件或其他入口文件中导入这些默认样式：

```js
import '@xyflow/react/dist/style.css';
```

在不涉及[自定义节点](/examples/nodes/custom-node)和[边缘](/examples/edges/custom-edges)的情况下，有三种方式可以调整 React Flow 的基础外观：

- 通过 `style` 属性传递内联样式
- 用自定义 CSS 覆盖内置类
- 覆写 React Flow 使用的 CSS 变量

### 内置暗黑与明亮模式

通过 [dark mode 示例](/examples/styling/dark-mode) 所示的 `colorMode` 属性（可选 'dark'、'light' 或 'system'），你可以选择内置的色彩模式。

```jsx
import ReactFlow from '@xyflow/react';

export default function Flow() {
  return <ReactFlow colorMode="dark" nodes={[...]} edges={[...]} />
}
```

当使用 `colorMode` 属性时，React Flow 会向根元素 (`.react-flow`) 添加一个类名，您可以根据色彩模式来定制流程样式：

```css
.dark .react-flow__node {
  background: #777;
  color: white;
}

.light .react-flow__node {
  background: white;
  color: #111;
}
```

### 通过 `style` 属性定制

开始自定义流程外观的最简单方式是使用 React Flow 众多组件提供的 `style` 属性来内联您自己的 CSS 样式。

```jsx
import ReactFlow from '@xyflow/react'

const styles = {
  background: 'red',
  width: '100%',
  height: 300,
};

export default function Flow() {
  return <ReactFlow style={styles} nodes={[...]} edges={[...]} />
}
```

### CSS 变量

如果您不想完全替换默认样式，而只是微调整体外观，可以覆盖我们在整个库中使用的部分 CSS 变量。要查看如何使用这些 CSS 变量的示例，请参阅我们的[功能概览](/examples/overview)示例。

这些变量大多具有自解释性。以下是您可能需要调整的所有变量及其默认值的参考表格：

| 变量名                                               | 默认值                              |
| :---------------------------------------------------- | :---------------------------------- |
| `--xy-edge-stroke-default`                            | `#b1b1b7`                           |
| `--xy-edge-stroke-width-default`                      | `1`                                 |
| `--xy-edge-stroke-selected-default`                   | `#555`                              |
| `--xy-connectionline-stroke-default`                  | `#b1b1b7`                           |
| `--xy-connectionline-stroke-width-default`            | `1`                                 |
| `--xy-attribution-background-color-default`           | `rgba(255, 255, 255, 0.5)`          |
| `--xy-minimap-background-color-default`               | `#fff`                              |
| `--xy-background-pattern-dots-color-default`          | `#91919a`                           |
| `--xy-background-pattern-line-color-default`          | `#eee`                              |
| `--xy-background-pattern-cross-color-default`         | `#e2e2e2`                           |
| `--xy-node-color-default`                             | `inherit`                           |
| `--xy-node-border-default`                            | `1px solid #1a192b`                 |
| `--xy-node-background-color-default`                  | `#fff`                              |
| `--xy-node-group-background-color-default`            | `rgba(240, 240, 240, 0.25)`         |
| `--xy-node-boxshadow-hover-default`                   | `0 1px 4px 1px rgba(0, 0, 0, 0.08)` |
| `--xy-node-boxshadow-selected-default`                | `0 0 0 0.5px #1a192b`               |
| `--xy-handle-background-color-default`                | `#1a192b`                           |
| `--xy-handle-border-color-default`                    | `#fff`                              |
| `--xy-selection-background-color-default`             | `rgba(0, 89, 220, 0.08)`            |
| `--xy-selection-border-default`                       | `1px dotted rgba(0, 89, 220, 0.8)`  |
| `--xy-controls-button-background-color-default`       | `#fefefe`                           |
| `--xy-controls-button-background-color-hover-default` | `#f4f4f4`                           |
| `--xy-controls-button-color-default`                  | `inherit`                           |
| `--xy-controls-button-color-hover-default`            | `inherit`                           |
| `--xy-controls-button-border-color-default`           | `#eee`                              |
| `--xy-controls-box-shadow-default`                    | `0 0 2px 1px rgba(0, 0, 0, 0.08)`   |
| `--xy-resize-background-color-default`                | `#3367d9`                           |

这些变量用于定义 React Flow 中各个元素的_默认样式_。这意味着它们仍可通过内联样式或针对单个元素的自定义类进行覆盖。如需覆盖这些变量，可通过以下方式实现：

```css
.react-flow {
  --xy-node-background-color-default: #ff5050;
}
```

<Callout type="warning">
  请注意这些变量同时定义在 `.react-flow` 和 `:root` 作用域下
</Callout>

### 覆盖内置类

部分开发者认为大量使用内联样式是一种反模式。这种情况下，您可以通过自定义 CSS 来覆盖 React Flow 使用的内置类。React Flow 为各类元素附加了许多类名，但您可能需要覆盖的主要类名如下：

| 类名                              | 描述                                                                                     |
| :--------------------------------- | :--------------------------------------------------------------------------------------- |
| `.react-flow`                      | 最外层容器                                                                               |
| `.react-flow__renderer`            | 内层容器                                                                                 |
| `.react-flow__zoompane`            | 缩放与平移面板                                                                           |
| `.react-flow__selectionpane`       | 选择面板                                                                                 |
| `.react-flow__selection`           | 用户选区                                                                                 |
| `.react-flow__edges`               | 包含流程图中所有边的元素                                                                 |
| `.react-flow__edge`                | 应用于流程中的每个 [`Edge`](/api-reference/types/edge)                                   |
| `.react-flow__edge.selected`       | 当 [`Edge`](/api-reference/types/edge) 被选中时添加                                      |
| `.react-flow__edge.animated`       | 当 [`Edge`](/api-reference/types/edge) 的 `animated` 属性为 `true` 时添加                |
| `.react-flow__edge.updating`       | 当 [`Edge`](/api-reference/types/edge) 通过 `onReconnect` 更新时添加                     |
| `.react-flow__edge-path`           | [`Edge`](/api-reference/types/edge) 的 SVG `<path />` 元素                               |
| `.react-flow__edge-text`           | [`Edge`](/api-reference/types/edge) 标签的 SVG `<text />` 元素                           |
| `.react-flow__edge-textbg`         | [`Edge`](/api-reference/types/edge) 标签背景的 SVG `<text />` 元素                       |
| `.react-flow__connection`          | 应用于当前连接线                                                                         |
| `.react-flow__connection-path`     | 连接线的 SVG `<path />`                                                                  |
| `.react-flow__nodes`               | 包含流程图中所有节点的元素                                                               |
| `.react-flow__node`                | 应用于流程中的每个 [`Node`](/api-reference/types/node)                                   |
| `.react-flow__node.selected`       | 当 [`Node`](/api-reference/types/node) 被选中时添加                                      |
| `.react-flow__node-default`        | 当 [`Node`](/api-reference/types/node) 类型为 `"default"` 时添加                         |
| `.react-flow__node-input`          | 当 [`Node`](/api-reference/types/node) 类型为 `"input"` 时添加                           |
| `.react-flow__node-output`         | 当 [`Node`](/api-reference/types/node) 类型为 `"output"` 时添加                          |
| `.react-flow__nodesselection`      | 节点选区                                                                                 |
| `.react-flow__nodesselection-rect` | 节点选区矩形                                                                             |
| `.react-flow__handle`              | 应用于每个 [`<Handle />`](/api-reference/components/handle) 组件                         |
| `.react-flow__handle-top`          | 当手柄的 [`Position`](/api-reference/types/position) 设为 `"top"` 时应用                 |
| `.react-flow__handle-right`        | 当手柄的 [`Position`](/api-reference/types/position) 设为 `"right"` 时应用               |
| `.react-flow__handle-bottom`       | 当手柄的 [`Position`](/api-reference/types/position) 设为 `"bottom"` 时应用              |
| `.react-flow__handle-left`         | 当手柄的 [`Position`](/api-reference/types/position) 设为 `"left"` 时应用                |
| `.connectingfrom`                  | 当连接线位于手柄上方时添加                                                               |
| `.connectingto`                    | 当连接线位于手柄上方时添加                                                               |
| `.valid`                           | 当连接线位于手柄上方 **且** 连接有效时添加                                               |
| `.react-flow__background`          | 应用于 [`<Background />`](/api-reference/components/background) 组件                     |
| `.react-flow__minimap`             | 应用于 [`<MiniMap />`](/api-reference/components/minimap) 组件                           |
| `.react-flow__controls`            | 应用于 [`<Controls />`](/api-reference/components/controls) 组件                         |

<Callout type="warning">
  如果深入源码寻找其他可覆盖的类名，请务必谨慎。部分类被内部使用，是保证库正常运行的必要条件。若替换它们可能导致意外错误或异常！
</Callout>

## 第三方解决方案

你可以选择完全弃用 React Flow 的默认样式，转而使用第三方样式方案。若采用此方式，必须确保仍导入基础样式。

```js
import '@xyflow/react/dist/base.css';
```

<Callout type="warning">
  这些基础样式是 **React Flow 正常运行的必要条件**。若不导入或用自定义样式覆盖，某些功能可能无法按预期工作！
</Callout>

<RemoteCodeViewer
  route="examples/styling/base-style"
  framework="react"
/>

### TailwindCSS

自定义节点和边本质上是 React 组件，你可以使用任意样式方案进行设计。例如，可以使用 [Tailwind](https://tailwindcss.com/) 来设计节点样式：

```jsx
function CustomNode({ data }) {
  return (
    <div className="px-4 py-2 shadow-md rounded-md bg-white border-2 border-stone-400">
      <div className="flex">
        <div className="rounded-full w-12 h-12 flex justify-center items-center bg-gray-100">
          {data.emoji}
        </div>
        <div className="ml-2">
          <div className="text-lg font-bold">{data.name}</div>
          <div className="text-gray-500">{data.job}</div>
        </div>
      </div>

      <Handle
        type="target"
        position={Position.Top}
        className="w-16 !bg-teal-500"
      />
      <Handle
        type="source"
        position={Position.Bottom}
        className="w-16 !bg-teal-500"
      />
    </div>
  );
}
```

<Callout type="warning">
  如需覆盖默认样式，请确保在 React Flow 基础样式之后导入 Tailwind 的入口文件。
</Callout>

```js
import '@xyflow/react/dist/style.css';
import 'tailwind.css';
```

查看 [示例项目](/examples/styling/tailwind) 获取 React Flow 结合 Tailwind 的完整实现！