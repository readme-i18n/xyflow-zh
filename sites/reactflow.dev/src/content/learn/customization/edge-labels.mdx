---

description: 本指南展示如何在 React Flow 中为自定义边渲染标签。

import { RemoteCodeViewer } from 'xy-shared/server';
import { Callout } from 'nextra/components';
import { Image } from 'xy-shared';

# 边标签

[自定义边](/learn/customization/custom-edges)最常见的用途之一是在边的路径上渲染控件或信息。在 React Flow 中，我们称之为_自定义边标签_，与边路径不同，边标签可以是任何 React 组件！

## 添加边标签

要渲染自定义边标签，必须将其包裹在 [`<EdgeLabelRenderer />`](/api-reference/components/edge-label-renderer) 组件中。这允许我们在边所在的 SVG 世界之外渲染标签。边标签渲染器是一个门户，所有边标签都会被渲染到同一个容器中。

让我们在自定义边上添加一个按钮，用于删除它所连接的边：

```jsx
import {
  BaseEdge,
  EdgeLabelRenderer,
  getStraightPath,
  useReactFlow,
} from '@xyflow/react';

export default function CustomEdge({ id, sourceX, sourceY, targetX, targetY }) {
  const { deleteElements } = useReactFlow();
  const [edgePath] = getStraightPath({
    sourceX,
    sourceY,
    targetX,
    targetY,
  });

  return (
    <>
      <BaseEdge id={id} path={edgePath} />
      <EdgeLabelRenderer>
        <button onClick={() => deleteElements({ edges: [{ id }] })}>delete</button>
      </EdgeLabelRenderer>
    </>
  );
}
```

如果现在尝试使用这个边，会发现按钮被渲染在流程图的中心（可能被"Node A"遮挡）。由于边标签门户的存在，我们需要额外做一些工作来自行定位按钮。

<Image
  src="/img/learn/edge-label-renderer-position.png"
  alt="A screen shot of a simple flow. The edge label renderer is highlighted in
  the DOM inspector and the button is rendered in the centre of the flow."
/>

幸运的是，之前介绍的路径工具函数可以帮我们解决这个问题！除了返回用于渲染的 SVG 路径外，这些函数还会返回路径中点的 `x` 和 `y` 坐标。我们可以利用这些坐标将自定义边标签转换到正确位置！

```jsx
export default function CustomEdge({ id, sourceX, sourceY, targetX, targetY }) {
  const { deleteElements } = useReactFlow();
  const [edgePath, labelX, labelY] = getStraightPath({ ... });

  return (
    ...
        <button
          style={{
            position: 'absolute',
            transform: `translate(-50%, -50%) translate(${labelX}px, ${labelY}px)`,
            pointerEvents: 'all',
          }}
          className="nodrag nopan"
          onClick={() => deleteElements({ edges: [{ id }] })}
        >
    ...
  );
}
```

<Callout type="info">
  为确保边缘标签具有交互性而不仅仅是展示用途，必须为标签样式添加 `pointer-events: all` 属性。这将保证标签可被点击。

与自定义节点中的交互控件类似，我们需要记得为标签添加 `nodrag` 和 `nopan` 类，以防止鼠标事件控制画布。

</Callout>

这是一个使用更新后自定义边缘的交互示例。点击删除按钮会将该边缘从流程中移除。创建新边缘时将使用自定义节点。

<RemoteCodeViewer route="learn/custom-edge-2" framework="react" />