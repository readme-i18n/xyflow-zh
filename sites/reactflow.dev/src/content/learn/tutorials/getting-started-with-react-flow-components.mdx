---

sidebarTitle: React Flow UI
title: React Flow UI å…¥é—¨æŒ‡å—
intro: words
date: 2024/01/20
authors: ['hayleigh']
tags: ['react-flow', 'ui', 'shadcn', 'computational']
image: ''
---

import { Emoji } from '@xyflow/xy-ui';
import { Callout } from 'nextra/components';
import { Image } from 'xy-shared';
import { RemoteCodeViewer } from 'xy-shared/server';

_**2025å¹´7æœˆæ›´æ–°**ï¼š"React Flow UI" å‰èº«ä¸º "React Flow Components"ã€‚æˆ‘ä»¬è¿›è¡Œæ›´åæ˜¯å› ä¸ºç°åœ¨å®ƒæ—¢åŒ…å«ç»„ä»¶ä¹ŸåŒ…å«æ¨¡æ¿ã€‚æ­¤å¤–ï¼Œç”±äºå®ƒåŸºäº shadcn/ui æ„å»ºï¼Œ"UI" çš„å‘½åèƒ½è®©å¼€å‘è€…æ›´å®¹æ˜“è¯†åˆ«å…¶å…³è”æ€§å¹¶ç†è§£æˆ‘ä»¬æä¾›çš„åŠŸèƒ½ã€‚_

æœ€è¿‘ï¼Œæˆ‘ä»¬å¼€æºé¡¹ç›®é˜µå®¹ä¸­æ–°å¢äº†ä¸€ä¸ªä»¤äººå…´å¥‹çš„æˆå‘˜ï¼šReact Flow Componentsã€‚è¿™äº›æ˜¯é¢„æ„å»ºçš„èŠ‚ç‚¹ã€è¾¹å’Œå…¶ä»– UI å…ƒç´ ï¼Œæ‚¨å¯ä»¥å¿«é€Ÿæ·»åŠ åˆ° React Flow åº”ç”¨ç¨‹åºä¸­ç«‹å³ä½¿ç”¨ã€‚å…³é”®åœ¨äºè¿™äº›ç»„ä»¶æ„å»ºäº [shadcn/ui](https://ui.shadcn.com) å’Œ shadcn CLI ä¹‹ä¸Šã€‚

æˆ‘ä»¬æ­¤å‰åœ¨ [xyflow åšå®¢](https://xyflow.com/blog/react-flow-components) ä¸Šåˆ†äº«è¿‡ç›¸å…³ç»éªŒä»¥åŠé€‰æ‹© shadcn çš„åŸå› ï¼Œä½†æœ¬æ•™ç¨‹å°†é‡ç‚¹ä»‹ç»å¦‚ä½•ä»é›¶å¼€å§‹ä½¿ç”¨ shadcnã€Tailwind CSS å’Œ React Flow Componentsã€‚

<Callout>
**ç­‰ç­‰ï¼Œä»€ä¹ˆæ˜¯ shadcnï¼Ÿ**

ä¸å¯¹ï¼Œåº”è¯¥è¯´**è°**æ˜¯ shadcnï¼Shadcn æ˜¯ä¸€ä½å¼€å‘è€…ï¼Œä»–åˆ›ä½œäº†ä¸€ç³»åˆ—é¢„è®¾è®¡ç»„ä»¶é›†åˆ `shadcn/ui`ã€‚æ³¨æ„åˆ°æˆ‘ä»¬åˆšæ‰æ²¡æœ‰ç”¨_åº“_è¿™ä¸ªè¯å—ï¼ŸShadcn é‡‡ç”¨äº†ä¸€ç§ç‹¬ç‰¹çš„æ–¹å¼ï¼šç»„ä»¶ä¼šè¢«æ·»åŠ åˆ°ä½ çš„é¡¹ç›®æºä»£ç ä¸­å¹¶ç”±ä½ "æ‹¥æœ‰"â€”â€”ä¸€æ—¦æ·»åŠ ç»„ä»¶ï¼Œä½ å°±å¯ä»¥è‡ªç”±ä¿®æ”¹å®ƒä»¬ä»¥æ»¡è¶³éœ€æ±‚ï¼

</Callout>

## å¿«é€Ÿå¼€å§‹

é¦–å…ˆï¼Œæˆ‘ä»¬å°†æ–°å»ºä¸€ä¸ª [`vite`](https://vitejs.dev) é¡¹ç›®ï¼Œå¹¶é…ç½®æ‰€æœ‰å¿…éœ€çš„ä¾èµ–é¡¹ã€‚ä»è¿è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹ï¼š

```bash copy npm2yarn
npx create-vite@latest
```

Vite èƒ½ä¸ºå¤šç§æµè¡Œæ¡†æ¶æ­å»ºé¡¹ç›®è„šæ‰‹æ¶ï¼Œä½†æˆ‘ä»¬åªéœ€è¦ Reactï¼å¦å¤–è¯·ç¡®ä¿åˆ›å»ºçš„æ˜¯ **TypeScript** é¡¹ç›®ã€‚React Flow çš„æ–‡æ¡£æ··åˆä½¿ç”¨äº† JavaScript å’Œ TypeScriptï¼Œä½†å¯¹äº shadcn ç»„ä»¶æ¥è¯´ TypeScript æ˜¯_å¿…éœ€_çš„ï¼

æ‰€æœ‰ shadcn å’Œ React Flow ç»„ä»¶éƒ½ä½¿ç”¨ [Tailwind CSS](https://tailwindcss.com/docs/utility-first) è¿›è¡Œæ ·å¼è®¾è®¡ï¼Œå› æ­¤æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦å®‰è£…å®ƒå’Œå…¶ä»–å‡ ä¸ªä¾èµ–ï¼š

```bash copy npm2yarn
npm install -D tailwindcss postcss autoprefixer
```

Tailwind æ˜¯ä¸€ä¸ªé«˜åº¦å¯å®šåˆ¶çš„å®ç”¨ä¼˜å…ˆ CSS æ¡†æ¶ï¼Œå¤§éƒ¨åˆ†å®šåˆ¶å·¥ä½œéƒ½åœ¨ `tailwind.config.js` æ–‡ä»¶ä¸­å®Œæˆã€‚å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸ªåŒ…èƒ½ä¸ºæˆ‘ä»¬ç”Ÿæˆé»˜è®¤é…ç½®ï¼š

```bash copy npm2yarn
npx tailwindcss init -p
```

Tailwind çš„å·¥ä½œåŸç†æ˜¯æ‰«æé¡¹ç›®æºä»£ç å¹¶æ„å»ºä»…åŒ…å«ä½ æ‰€ç”¨å·¥å…·çš„ CSS æ–‡ä»¶ã€‚ä¸ºç¡®ä¿è¿™ä¸ªè¿‡ç¨‹é¡ºåˆ©è¿›è¡Œï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸¤å¤„é…ç½®ï¼š

1. æ›´æ–° `tailwind.config.js` ä¸­çš„ `content` å­—æ®µï¼Œä½¿å…¶åŒ…å«å¯èƒ½å«æœ‰ Tailwind ç±»çš„æ‰€æœ‰æºæ–‡ä»¶ã€‚

```js filename="tailwind.config.js" {3}
/** @type {import('tailwindcss').Config} */
export default {
  content: ['./index.html', './src/**/*.{ts,tsx,js,jsx}'],
  theme: {
    extend: {},
  },
  plugins: [],
};
```

2. å°†ç”Ÿæˆçš„ `src/index.css` æ–‡ä»¶æ›¿æ¢ä¸º Tailwind æŒ‡ä»¤ï¼š

```css filename="src/index.css"
@tailwind base;
@tailwind components;
@tailwind utilities;
```

æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤ç”Ÿæˆçš„ `src/App.css` æ–‡ä»¶ï¼Œå¹¶å°† `src/App.jsx` ä¿®æ”¹ä¸ºä»…æ¸²æŸ“ä¸€ä¸ªç©ºçš„ `div`ï¼š

```jsx filename="src/App.jsx"
function App() {
  return <div className="w-screen h-screen p-8"></div>;
}

export default App;
```

<Callout>
  `w-screen` å’Œ `h-screen` ç±»æ˜¯ Tailwind å·¥å…·ç±»çš„ä¸¤ä¸ªç¤ºä¾‹ã€‚å¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨å…¶ä»–æ–¹å¼ä¸º React åº”ç”¨æ·»åŠ æ ·å¼ï¼Œä¸€å¼€å§‹å¯èƒ½ä¼šè§‰å¾—è¿™ç§æ–¹å¼æœ‰äº›å¥‡æ€ªã€‚ä½ å¯ä»¥å°† Tailwind ç±»è§†ä¸ºå¢å¼ºç‰ˆçš„å†…è”æ ·å¼ï¼šå®ƒä»¬å—é™äºä¸€å¥—è®¾è®¡ç³»ç»Ÿï¼Œå¹¶ä¸”ä½ å¯ä»¥ä½¿ç”¨å“åº”å¼åª’ä½“æŸ¥è¯¢æˆ–è¯¸å¦‚ `hover` å’Œ `focus` è¿™æ ·çš„ä¼ªç±»ã€‚
</Callout>

### é…ç½® shadcn/ui

Vite åœ¨ç”Ÿæˆ TypeScript é¡¹ç›®æ—¶ä¼šä¸ºæˆ‘ä»¬æ­å»ºä¸€äº› `tsconfig` æ–‡ä»¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹è¿™äº›æ–‡ä»¶è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼Œä»¥ä¾¿ shadcn ç»„ä»¶èƒ½å¤Ÿæ­£å¸¸å·¥ä½œã€‚shadcn CLI ç›¸å½“æ™ºèƒ½ï¼ˆç¨åä¼šè¯¦ç»†ä»‹ç»ï¼‰ï¼Œä½†å®ƒæ— æ³•é€‚åº”æ‰€æœ‰é¡¹ç›®ç»“æ„ï¼Œå› æ­¤ç›¸äº’ä¾èµ–çš„ shadcn ç»„ä»¶ä¼šåˆ©ç”¨ TypeScript çš„å¯¼å…¥è·¯å¾„åŠŸèƒ½ã€‚

åœ¨ `tsconfig.json` å’Œ `tsconfig.app.json` ä¸­ï¼Œå‘ `compilerOptions` å¯¹è±¡æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```json filename="tsconfig.json" {3-8}
{
  ...
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

ç„¶åæˆ‘ä»¬éœ€è¦è®© Vite å­¦ä¼šå¦‚ä½•è§£æè¿™äº›è·¯å¾„ï¼š

```bash copy npm2yarn
npm i -D @types/node
```

```js filename="vite.config.js" {3, 7-11}
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import path from 'node:path';

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
});
```

ç°åœ¨ï¼Œä¸å¦¨ç»™è‡ªå·±ä¸€ç‚¹é¼“åŠ±ï¼Œä¼‘æ¯ç‰‡åˆ»å–æ¯èŒ¶ã€‚è™½ç„¶å‰æœŸéœ€è¦å®Œæˆå¤§é‡é…ç½®å·¥ä½œï¼Œä½†ä¸€æ—¦è®¾ç½®å¥½ shadcn CLIï¼Œæˆ‘ä»¬å°±èƒ½é€šè¿‡å•ä¸€å‘½ä»¤ä¸ºé¡¹ç›®æ·»åŠ æ–°ç»„ä»¶â€”â€”å³ä½¿è¿™äº›ç»„ä»¶å­˜åœ¨ä¾èµ–å…³ç³»æˆ–éœ€è¦ä¿®æ”¹ç°æœ‰æ–‡ä»¶ï¼

ç°åœ¨å¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤åœ¨é¡¹ç›®ä¸­è®¾ç½® shadcn/uiï¼š

```bash copy npm2yarn
npx shadcn@latest init
```

CLI ä¼šè¯¢é—®å‡ ä¸ªå…³äºé¡¹ç›®çš„é—®é¢˜ï¼Œéšåå°†åœ¨é¡¹ç›®æ ¹ç›®å½•ç”Ÿæˆ `components.json` æ–‡ä»¶ï¼Œå¹¶é€šè¿‡ä¸»é¢˜æ‰©å±•æ›´æ–° `tailwind.config.js`ã€‚ç›®å‰æˆ‘ä»¬å¯ä»¥å…¨éƒ¨é€‰æ‹©é»˜è®¤é€‰é¡¹ï¼š

```
âœ” Which style would you like to use? â€º New York
âœ” Which color would you like to use as the base color? â€º Neutral
âœ” Would you like to use CSS variables for theming? yes
```

## æ·»åŠ é¦–ä¸ªç»„ä»¶

ä¸ºäº†å±•ç¤º shadcn çš„å¼ºå¤§åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬ç›´æ¥å¼€å§‹åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ **React Flow** åº”ç”¨ï¼ç°åœ¨ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œåªéœ€ä¸€æ¡å‘½ä»¤å³å¯æ·»åŠ  [`<BaseNode />`](/ui/components/base-node) ç»„ä»¶ï¼š

```bash copy npm2yarn
npx shadcn@latest add https://ui.reactflow.dev/base-node
```

è¯¥å‘½ä»¤å°†ç”Ÿæˆæ–°æ–‡ä»¶ `src/components/base-node.tsx`ï¼ŒåŒæ—¶æ›´æ–°ä¾èµ–é¡¹ä»¥åŒ…å« `@xyflow/react`ï¼

è¿™ä¸ª `<BaseNode />` ç»„ä»¶å¹¶éç›´æ¥çš„ React Flow èŠ‚ç‚¹ã€‚æ­£å¦‚å…¶åï¼Œå®ƒæ˜¯å…¶ä»–è®¸å¤šèŠ‚ç‚¹çš„åŸºç¡€æ„å»ºæ¨¡å—ï¼ŒåŒæ—¶è¿˜é™„å¸¦ä»¥ä¸‹å¯ç”¨äºå®šä¹‰èŠ‚ç‚¹å¤´éƒ¨å’Œå†…å®¹çš„å­ç»„ä»¶ï¼š

- `<BaseNodeHeader />`
- `<BaseNodeHeaderTitle />`
- `<BaseNodeContent />`
- `<BaseNodeFooter />`

ä½ å¯ä»¥ç”¨å®ƒæ¥ä¸ºæ‰€æœ‰èŠ‚ç‚¹ç»Ÿä¸€é£æ ¼ã€‚è®©æˆ‘ä»¬é€šè¿‡æ›´æ–° `App.jsx` æ–‡ä»¶æ¥çœ‹çœ‹æ•ˆæœï¼š

```jsx filename="src/App.jsx"
import '@xyflow/react/dist/style.css';

import { BaseNode } from '@/components/base-node';

function App() {
  return (
    <div className="w-screen h-screen p-8">
      <BaseNode>
        <BaseNodeHeader>
          <BaseNodeHeaderTitle>Base Node</BaseNodeHeaderTitle>
        </BaseNodeHeader>
        <BaseNodeContent>
          This is a base node component that can be used to build other nodes.
        </BaseNodeContent>
      </BaseNode>
    </div>
  );
}

export default App;
```

å¥½å§ï¼Œçœ‹èµ·æ¥å¹¶ä¸ç‰¹åˆ«æƒŠè‰³...

<Image
  src="/img/tutorials/components/base-node.png"
  alt="A screenshot of a simple React application. It renders one element, a
  rounded container with a blue border and the text 'Hi! ğŸ‘‹' inside."
/>

è¯·è®°ä½ï¼Œ`<BaseNode />` ç»„ä»¶ä¼šè¢«æˆ‘ä»¬é€šè¿‡ shadcn CLI æ·»åŠ çš„ä»»ä½•_å…¶ä»–_ React Flow ç»„ä»¶æ‰€ä½¿ç”¨ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘ä»¬ä¿®æ”¹å®ƒä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿè®©æˆ‘ä»¬æ›´æ–° `<BaseNode />` ç»„ä»¶ï¼Œä½¿å…¶å°†æ‰€æœ‰æ–‡æœ¬æ¸²æŸ“ä¸ºåŠ ç²—ç­‰å®½å­—ä½“ï¼š

```jsx filename="src/components/base-node.tsx" {11}
import { cn } from "@/lib/utils";
import { forwardRef, HTMLAttributes } from "react";

export const BaseNode = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      className={cn(
        'relative rounded-md border bg-card text-card-foreground',
        'hover:ring-1',
        // React Flow displays node elements inside of a `NodeWrapper` component,
        // which compiles down to a div with a the class `react-flow__node`.
        // When a node is selected, the class `selected` is added to the
        // `react-flow__node` element. This allows us to style the node when it
        // is selected, using Tailwind's `&` selector.
        '[.react-flow\\_\\_node.selected_&]:border-muted-foreground',
        '[.react-flow\\_\\_node.selected_&]:shadow-lg',
        className,
      )}
      tabIndex={0}
      {...props}
    />
  ),
);
BaseNode.displayName = 'BaseNode';

/**
 * A container for a consistent header layout intended to be used inside the
 * `<BaseNode />` component.
 */
export const BaseNodeHeader = forwardRef<HTMLElement, HTMLAttributes<HTMLElement>>(
  ({ className, ...props }, ref) => (
    <header
      ref={ref}
      {...props}
      className={cn(
        'mx-0 my-0 -mb-1 flex flex-row items-center justify-between gap-2 px-3 py-2',
        // Remove or modify these classes if you modify the padding in the
        // `<BaseNode />` component.
        className,
      )}
    />
  ),
);
BaseNodeHeader.displayName = 'BaseNodeHeader';

/**
 * The title text for the node. To maintain a native application feel, the title
 * text is not selectable.
 */
export const BaseNodeHeaderTitle = forwardRef<
  HTMLHeadingElement,
  HTMLAttributes<HTMLHeadingElement>
>(({ className, ...props }, ref) => (
  <h3
    ref={ref}
    data-slot="base-node-title"
    className={cn('user-select-none flex-1 font-semibold', className)}
    {...props}
  />
));
BaseNodeHeaderTitle.displayName = 'BaseNodeHeaderTitle';

export const BaseNodeContent = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      data-slot="base-node-content"
      className={cn('flex flex-col gap-y-2 p-3', className)}
      {...props}
    />
  ),
);
BaseNodeContent.displayName = 'BaseNodeContent';

export const BaseNodeFooter = forwardRef<HTMLDivElement, HTMLAttributes<HTMLDivElement>>(
  ({ className, ...props }, ref) => (
    <div
      ref={ref}
      data-slot="base-node-footer"
      className={cn(
        'flex flex-col items-center gap-y-2 border-t px-3 pb-3 pt-2',
        className,
      )}
      {...props}
    />
  ),
);
BaseNodeFooter.displayName = 'BaseNodeFooter';

```

ç°åœ¨æˆ‘ä»¬å°†ä» React Flow UI æ³¨å†Œè¡¨ä¸­æ·»åŠ ä¸€ä¸ªå®é™…èŠ‚ç‚¹çœ‹çœ‹æ•ˆæœï¼š

```bash copy npm2yarn
npx shadcn@latest add https://ui.reactflow.dev/node-tooltip
```

æ¥ç€æ›´æ–° `App.tsx` æ–‡ä»¶æ¥æ¸²æŸ“ä¸€ä¸ªå®Œæ•´çš„æµç¨‹å›¾ã€‚æˆ‘ä»¬å°†é‡‡ç”¨ä¸å¤§å¤šæ•°ç¤ºä¾‹ç›¸åŒçš„åŸºç¡€é…ç½®ï¼Œå› æ­¤ä¸å†é€é¡¹æ‹†è§£ã€‚å¦‚æœä½ åˆšæ¥è§¦ React Flow å¹¶æƒ³äº†è§£å¦‚ä½•ä»é›¶æ­å»ºåŸºç¡€æµç¨‹å›¾ï¼Œè¯·æŸ¥é˜…æˆ‘ä»¬çš„[å¿«é€Ÿå…¥é—¨æŒ‡å—](/learn)ã€‚

{/* TODO this could be linked to example app with RemoteCodeViewer editor */}

```tsx filename="src/App.tsx"
import React from 'react';
import { ReactFlow, type Node, Position, useNodesState } from '@xyflow/react';

import '@xyflow/react/dist/style.css';

import {
  NodeTooltip,
  NodeTooltipContent,
  NodeTooltipTrigger,
} from './components/node-tooltip';
import { BaseNodeContent } from './components/base-node';

function Tooltip() {
  return (
    <NodeTooltip>
      <NodeTooltipContent position={Position.Top}>Hidden Content</NodeTooltipContent>
      <BaseNode>
        <BaseNodeContent>
          <NodeTooltipTrigger>Hover</NodeTooltipTrigger>
        </BaseNodeContent>
      </BaseNode>
    </NodeTooltip>
  );
}

const nodeTypes = {
  tooltip: Tooltip,
};

const initialNodes: Node[] = [
  {
    id: '1',
    position: { x: 0, y: 0 },
    data: {},
    type: 'tooltip',
  },
];

function Flow() {
  const [nodes, , onNodesChange] = useNodesState(initialNodes);

  return (
    <div className="h-screen w-screen p-8 bg-gray-50 rounded-xl">
      <ReactFlow
        nodes={nodes}
        nodeTypes={nodeTypes}
        onNodesChange={onNodesChange}
        fitView
      />
    </div>
  );
}
export function App() {
  return <Flow />;
}
```

çœ‹å“ªï¼Œæˆ‘ä»¬æ·»åŠ çš„å·¥å…·æç¤ºèŠ‚ç‚¹è‡ªåŠ¨ä½¿ç”¨äº†æˆ‘ä»¬è‡ªå®šä¹‰çš„ `<BaseNode />` ç»„ä»¶ï¼

<RemoteCodeViewer route="tutorials/components/tooltip" framework="react" />

## å¿«é€Ÿè¿­ä»£ä¸åˆ›é€ 

ç°åœ¨æˆ‘ä»¬å·²ç»åŸºæœ¬ç†è§£ shadcn/ui å’Œ CLI çš„å·¥ä½œåŸç†ï¼Œå¯ä»¥å¼€å§‹ä½“ä¼šæ·»åŠ æ–°ç»„ä»¶å’Œæ„å»ºæµç¨‹å›¾æ˜¯å¤šä¹ˆç®€å•ã€‚ä¸ºäº†å±•ç¤º React Flow Components çš„å…¨éƒ¨èƒ½åŠ›ï¼Œè®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªç®€å•çš„è®¡ç®—å™¨æµç¨‹å›¾ã€‚

é¦–å…ˆç§»é™¤ `<NodeTooltip />` å¹¶æ’¤é”€å¯¹ `<BaseNode />` çš„ä¿®æ”¹ã€‚é™¤äº†é¢„åˆ¶èŠ‚ç‚¹å¤–ï¼ŒReact Flow UI è¿˜æä¾›äº†æ„å»ºè‡ªå®šä¹‰èŠ‚ç‚¹çš„ç»„ä»¶æ¨¡å—ã€‚æˆ‘ä»¬å°†æ·»åŠ  `labeled-handle` ç»„ä»¶æ¥æŸ¥çœ‹è¿™äº›åŠŸèƒ½ï¼š

```bash copy npm2yarn
npx shadcn@latest add https://ui.reactflow.dev/labeled-handle
```

æˆ‘ä»¬è¦åˆ›å»ºçš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹æ˜¯ç®€å•çš„æ•°å€¼èŠ‚ç‚¹ï¼ŒåŒ…å«å¢å‡æ•°å€¼çš„æŒ‰é’®å’Œç”¨äºè¿æ¥å…¶ä»–èŠ‚ç‚¹çš„è¿æ¥ç‚¹ã€‚åˆ›å»ºæ–‡ä»¶å¤¹ `src/components/nodes` å¹¶æ·»åŠ æ–°æ–‡ä»¶ `src/components/nodes/num-node.tsx`ã€‚

å°†ä»¥ä¸‹ä»£ç ç²˜è´´åˆ°æ–°æ–‡ä»¶ä¸­ï¼Œå¹¶å®‰è£…ä»¥ä¸‹ä¾èµ–é¡¹ï¼š

```bash copy npm2yarn
npx shadcn@latest add dropdown-menu button
```

```tsx filename="src/components/nodes/num-node.tsx"
import { type Node, type NodeProps, Position, useReactFlow } from '@xyflow/react';
import { useCallback } from 'react';

import {
  BaseNode,
  BaseNodeContent,
  BaseNodeFooter,
  BaseNodeHeader,
  BaseNodeHeaderTitle,
} from '@/components/base-node';
import { LabeledHandle } from '@/components/labeled-handle';

import { EllipsisVertical } from 'lucide-react';
import { Button } from '@/components/ui/button';
import {
  DropdownMenu,
  DropdownMenuContent,
  DropdownMenuItem,
  DropdownMenuLabel,
  DropdownMenuTrigger,
} from '@/components/ui/dropdown-menu';

export type NumNode = Node<{
  value: number;
}>;

export function NumNode({ id, data }: NodeProps<NumNode>) {
  const { updateNodeData, setNodes } = useReactFlow();

  const handleReset = useCallback(() => {
    updateNodeData(id, { value: 0 });
  }, [id, updateNodeData]);

  const handleDelete = useCallback(() => {
    setNodes((nodes) => nodes.filter((node) => node.id !== id));
  }, [id, setNodes]);

  const handleIncr = useCallback(() => {
    updateNodeData(id, { value: data.value + 1 });
  }, [id, data.value, updateNodeData]);

  const handleDecr = useCallback(() => {
    updateNodeData(id, { value: data.value - 1 });
  }, [id, data.value, updateNodeData]);

  return (
    <BaseNode>
      <BaseNodeHeader className="border-b">
        <BaseNodeHeaderTitle>Num</BaseNodeHeaderTitle>

        <DropdownMenu>
          <DropdownMenuTrigger asChild>
            <Button
              variant="ghost"
              className="nodrag p-1"
              aria-label="Node Actions"
              title="Node Actions"
            >
              <EllipsisVertical className="size-4" />
            </Button>
          </DropdownMenuTrigger>
          <DropdownMenuContent>
            <DropdownMenuLabel>Node Actions</DropdownMenuLabel>
            <DropdownMenuItem onSelect={handleReset}>Reset</DropdownMenuItem>
            <DropdownMenuItem onSelect={handleDelete}>Delete</DropdownMenuItem>
          </DropdownMenuContent>
        </DropdownMenu>
      </BaseNodeHeader>

      <BaseNodeContent>
        <div className="flex gap-2 items-center">
          <Button onClick={handleDecr}>-</Button>
          <pre>{String(data.value).padStart(3, ' ')}</pre>
          <Button onClick={handleIncr}>+</Button>
        </div>
      </BaseNodeContent>

      <BaseNodeFooter className="bg-gray-100 items-end px-0 py-1 w-full">
        <LabeledHandle title="out" type="source" position={Position.Right} />
      </BaseNodeFooter>
    </BaseNode>
  );
}
```

<Callout>
  æœ¬æ•™ç¨‹ä¸æ¶‰åŠåŸºç¡€ React Flow æ¦‚å¿µï¼ˆå¦‚æµç¨‹å’Œè‡ªå®šä¹‰èŠ‚ç‚¹ï¼‰ï¼Œå› æ­¤**è·³è¿‡éƒ¨åˆ†åŸºç¡€çŸ¥è¯†**ã€‚å¦‚æœä½ æ˜¯ React Flow æ–°æ‰‹å¹¶æƒ³å­¦ä¹ å¦‚ä½•å‘æµç¨‹æ·»åŠ è‡ªå®šä¹‰èŠ‚ç‚¹å’Œè¾¹ï¼Œè¯·å‚é˜…[è‡ªå®šä¹‰èŠ‚ç‚¹æŒ‡å—](/learn/customization/custom-nodes)ã€‚
</Callout>

åœ¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­ï¼Œæˆ‘ä»¬é«˜äº®äº†æ¥è‡ª shadcn/ui å’Œ React Flow Components çš„å¯¼å…¥é¡¹å’Œç»„ä»¶ã€‚ä»…ç”¨å‡ è¡Œä»£ç æˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªåŠŸèƒ½å®Œå¤‡çš„èŠ‚ç‚¹ï¼š

<RemoteCodeViewer route="tutorials/components/num-node" framework="react" />

æˆ‘ä»¬çš„ `<NumNode />` ç»„ä»¶...

- å…·æœ‰å¸¦æ ‡é¢˜å’ŒåŠŸèƒ½ä¸‹æ‹‰èœå•çš„å¤´éƒ¨
- åŒ…å«ç”¨äºå¢å‡æ•°å€¼çš„ç®€å•æ§ä»¶
- å¸¦æœ‰æ ‡è®°è¿æ¥ç‚¹å¯ä¸å…¶ä»–èŠ‚ç‚¹ç›¸è¿

æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ›å»ºç¬¬äºŒä¸ªèŠ‚ç‚¹ï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªè¾“å…¥å€¼çš„å’Œã€‚è¿™ä¸ªèŠ‚ç‚¹ä¸éœ€è¦æ·»åŠ é¢å¤–çš„ç»„ä»¶ï¼Œå› æ­¤è¯·ç›´æ¥æ–°å»ºæ–‡ä»¶ `src/components/nodes/sum-node.tsx` å¹¶ç²˜è´´ä»¥ä¸‹å†…å®¹ï¼š

```tsx filename="src/components/nodes/sum-node.tsx"
import {
  type Node,
  type NodeProps,
  Position,
  useReactFlow,
  useStore,
} from '@xyflow/react';
import { useEffect } from 'react';

import { BaseNode, BaseNodeHeader, BaseNodeHeaderTitle } from '../base-node';
import { LabeledHandle } from '../labeled-handle';

export type SumNode = Node<{
  value: number;
}>;

export function SumNode({ id }: NodeProps<SumNode>) {
  const { updateNodeData, getHandleConnections } = useReactFlow();
  const { x, y } = useStore((state) => ({
    x: getHandleValue(
      getHandleConnections({ nodeId: id, id: 'x', type: 'target' }),
      state.nodeLookup,
    ),
    y: getHandleValue(
      getHandleConnections({ nodeId: id, id: 'y', type: 'target' }),
      state.nodeLookup,
    ),
  }));

  useEffect(() => {
    updateNodeData(id, { value: x + y });
  }, [x, y]);

  return (
    <BaseNode className="w-32">
      <BaseNodeHeader>
        <BaseNodeHeaderTitle>Sum</BaseNodeHeaderTitle>
      </BaseNodeHeader>

      <footer className="bg-gray-100">
        <LabeledHandle title="x" id="x" type="target" position={Position.Left} />
        <LabeledHandle title="y" id="y" type="target" position={Position.Left} />
        <LabeledHandle title="out" type="source" position={Position.Right} />
      </footer>
    </BaseNode>
  );
}

function getHandleValue(
  connections: Array<{ source: string }>,
  lookup: Map<string, Node<any>>,
) {
  return connections.reduce((acc, { source }) => {
    const node = lookup.get(source)!;
    const value = node.data.value;

    return typeof value === 'number' ? acc + value : acc;
  }, 0);
}
```

React Flow UI ä¸ä»…æä¾›äº†æ„å»ºèŠ‚ç‚¹çš„ç»„ä»¶ï¼Œè¿˜å†…ç½®äº†é¢„åˆ¶çš„è¾¹çº¿å’Œå…¶ä»– UI å…ƒç´ ï¼Œæ‚¨å¯ä»¥ç›´æ¥æ‹–å…¥æµç¨‹å›¾ä¸­å¿«é€Ÿæ­å»ºã€‚

ä¸ºäº†æ›´å¥½åœ°åœ¨è®¡ç®—å™¨æµç¨‹ä¸­å¯è§†åŒ–æ•°æ®ï¼Œæˆ‘ä»¬å°†å¼•å…¥ `data-edge` ç»„ä»¶ã€‚è¯¥è¾¹çº¿ä¼šå°†æºèŠ‚ç‚¹æ•°æ®å¯¹è±¡ä¸­çš„å­—æ®µæ¸²æŸ“ä¸ºè¾¹çº¿ä¸Šçš„æ ‡ç­¾ã€‚å°† `data-edge` ç»„ä»¶æ·»åŠ åˆ°æ‚¨çš„é¡¹ç›®ä¸­ï¼š

```bash copy npm2yarn
npx shadcn@latest add https://ui.reactflow.dev/data-edge
```

`<DataEdge />` ç»„ä»¶çš„å·¥ä½œåŸç†æ˜¯ä»æºèŠ‚ç‚¹çš„ `data` å¯¹è±¡ä¸­æŸ¥æ‰¾å­—æ®µã€‚æˆ‘ä»¬ä¸€ç›´åœ¨è®¡ç®—å™¨å­—æ®µçš„ `"value"` å±æ€§ä¸­å­˜å‚¨æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ï¼Œå› æ­¤éœ€è¦æ›´æ–° `edgeType` å¯¹è±¡ä»¥åŒ…å«æ–°çš„ `data-edge`ï¼ŒåŒæ—¶æ›´æ–° `onConnect` å¤„ç†ç¨‹åºæ¥åˆ›å»ºè¿™ç§ç±»å‹çš„æ–°è¾¹çº¿ï¼Œå¹¶ç¡®ä¿æ­£ç¡®è®¾ç½®è¾¹çº¿çš„ `data` å¯¹è±¡ï¼š

```tsx filename="src/App.tsx"
import '@xyflow/react/dist/style.css';

import {
  ReactFlow,
  OnConnect,
  Position,
  useNodesState,
  useEdgesState,
  addEdge,
  Edge,
  Node,
} from '@xyflow/react';

import { NumNode } from '@/components/nodes/num-node';
import { SumNode } from '@/components/nodes/sum-node';

import { DataEdge } from '@/components/data-edge';

const nodeTypes = {
  num: NumNode,
  sum: SumNode,
};

const initialNodes: Node[] = [
  { id: 'a', type: 'num', data: { value: 0 }, position: { x: 0, y: 0 } },
  { id: 'b', type: 'num', data: { value: 0 }, position: { x: 0, y: 200 } },
  { id: 'c', type: 'sum', data: { value: 0 }, position: { x: 300, y: 100 } },
  { id: 'd', type: 'num', data: { value: 0 }, position: { x: 0, y: 400 } },
  { id: 'e', type: 'sum', data: { value: 0 }, position: { x: 600, y: 400 } },
];

const edgeTypes = {
  data: DataEdge,
};

const initialEdges: Edge[] = [
  {
    id: 'a->c',
    type: 'data',
    data: { key: 'value' },
    source: 'a',
    target: 'c',
    targetHandle: 'x',
  },
  {
    id: 'b->c',
    type: 'data',
    data: { key: 'value' },
    source: 'b',
    target: 'c',
    targetHandle: 'y',
  },
  {
    id: 'c->e',
    type: 'data',
    data: { key: 'value' },
    source: 'c',
    target: 'e',
    targetHandle: 'x',
  },
  {
    id: 'd->e',
    type: 'data',
    data: { key: 'value' },
    source: 'd',
    target: 'e',
    targetHandle: 'y',
  },
];

function App() {
  const [nodes, , onNodesChange] = useNodesState(initialNodes);
  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);

  const onConnect: OnConnect = useCallback(
    (params) => {
      setEdges((edges) =>
        addEdge({ type: 'data', data: { key: 'value' }, ...params }, edges),
      );
    },
    [setEdges],
  );

  return (
    <div className="h-screen w-screen p-8">
      <ReactFlow
        nodes={nodes}
        edges={edges}
        onNodesChange={onNodesChange}
        onEdgesChange={onEdgesChange}
        onConnect={onConnect}
        nodeTypes={nodeTypes}
        edgeTypes={edgeTypes}
        fitView
      />
    </div>
  );
}

export default App;
```

å°†æ‰€æœ‰ç»„ä»¶æ•´åˆåï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªåŠŸèƒ½ç›¸å½“å®Œå–„çš„å°å‹è®¡ç®—å™¨ï¼

<RemoteCodeViewer route="tutorials/components/complete" framework="react" />

æ‚¨å¯ä»¥ç»§ç»­å®Œå–„è¿™ä¸ªæµç¨‹å›¾ï¼Œé€šè¿‡æ·»åŠ èŠ‚ç‚¹æ¥æ‰§è¡Œå…¶ä»–æ“ä½œï¼Œæˆ–è€…ä½¿ç”¨ [shadcn/ui ç»„ä»¶åº“](https://ui.shadcn.com/docs/components/slider) ä¸­çš„é¢å¤–ç»„ä»¶æ¥æ¥æ”¶ç”¨æˆ·è¾“å…¥ã€‚äº‹å®ä¸Šï¼Œè¯·å¯†åˆ‡å…³æ³¨æœ¬æ•™ç¨‹çš„åç»­å†…å®¹ï¼Œæˆ‘ä»¬å°†å±•ç¤ºä¸€ä¸ªä½¿ç”¨ React Flow Components æ„å»ºçš„å®Œæ•´åº”ç”¨ <Emoji content="ğŸ‘€" />ã€‚

## æ€»ç»“

åœ¨çŸ­çŸ­æ—¶é—´å†…ï¼Œæˆ‘ä»¬åˆ©ç”¨ shadcn React Flow Components æä¾›çš„ç»„ä»¶å’Œæ„å»ºæ¨¡å—ï¼ŒæˆåŠŸæ­å»ºäº†ä¸€ä¸ªç›¸å½“å®Œæ•´çš„æµç¨‹å›¾ã€‚æˆ‘ä»¬å­¦åˆ°äº†ï¼š

- å¦‚ä½•é€šè¿‡ç¼–è¾‘ [`<BaseNode />`](/ui/components/base-node) ç»„ä»¶æ¥å½±å“ä» React Flow UI æ³¨å†Œè¡¨ä¸­æå–çš„å…¶ä»–èŠ‚ç‚¹

- å¦‚ä½•ä½¿ç”¨ [`<BaseNodeHeader />`](/ui/components/base-node) å’Œ [`<LabeledHandle />`](/ui/components/labeled-handle) ç­‰æ„å»ºæ¨¡å—ç»„ä»¶ï¼Œæ— éœ€ä»é›¶å¼€å§‹å°±èƒ½åˆ›å»ºè‡ªå®šä¹‰èŠ‚ç‚¹

- React Flow UI è¿˜æä¾›äº†åƒ [`<DataEdge />`](/ui/components/data-edge) è¿™æ ·çš„è‡ªå®šä¹‰è¾¹çº¿ç»„ä»¶ï¼Œå¯ç›´æ¥é›†æˆåˆ°åº”ç”¨ä¸­

å¾—ç›Šäº Tailwind çš„å¼ºå¤§åŠŸèƒ½ï¼Œè°ƒæ•´è¿™äº›ç»„ä»¶çš„è§†è§‰æ ·å¼å°±åƒç¼–è¾‘ `tailwind.config.js` å’Œä¿®æ”¹ CSS æ–‡ä»¶ä¸­çš„å˜é‡ä¸€æ ·ç®€å•ã€‚

ç›®å‰å°±ä»‹ç»åˆ°è¿™é‡Œï¼æ‚¨å¯ä»¥åœ¨ [UI æ–‡æ¡£é¡µé¢](/ui) æŸ¥çœ‹æˆ‘ä»¬å½“å‰æä¾›çš„æ‰€æœ‰ç»„ä»¶ã€‚React Flow UI é¡¹ç›®ä»å¤„äºæ—©æœŸé˜¶æ®µï¼šå¦‚æœæ‚¨æœ‰ä»»ä½•æ–°ç»„ä»¶çš„å»ºè®®æˆ–éœ€æ±‚ï¼Œæˆ‘ä»¬éå¸¸ä¹æ„å¬å–ã€‚æˆ–è€…æ‚¨å¯èƒ½å·²ç»å¼€å§‹ä½¿ç”¨ shadcn å’Œ React Flow UI æ„å»ºé¡¹ç›®äº†ã€‚æ— è®ºå“ªç§æƒ…å†µï¼Œéƒ½æ¬¢è¿é€šè¿‡æˆ‘ä»¬çš„ [Discord æœåŠ¡å™¨](https://discord.com/invite/RVmnytFmGW) æˆ– [Twitter](https://twitter.com/xyflowdev) è”ç³»æˆ‘ä»¬ï¼