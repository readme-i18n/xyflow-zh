---

description: React Flow 在设计上同时支持键盘操作和屏幕阅读器访问。
---

import { Callout } from 'nextra/components';

# 无障碍访问

<Callout type="info">

如果您对如何改进 React Flow 的无障碍功能有任何建议，欢迎随时[联系我们](https://xyflow.com/contact)。

</Callout>

React Flow 提供键盘和屏幕阅读器支持以符合无障碍标准。默认情况下，所有节点和边均可通过键盘聚焦和操作。您可以通过以下属性启用或禁用这些功能：[nodesFocusable](/api-reference/react-flow#nodesfocusable)、[edgesFocusable](/api-reference/react-flow#edgesfocusable) 和 [disableKeyboardA11y](/api-reference/react-flow#disablekeyboarda11y)，这些属性通过 `<ReactFlow />` 组件传递，如下所示：

```js
<ReactFlow
  nodesFocusable={true}
  edgesFocusable={true}
  disableKeyboardA11y={false}
  nodes={nodes}
  edges={edges}
>
  {/* ...other components like Controls, MiniMap... */}
</ReactFlow>
```

## 内置功能

- **标签页导航**：按下 `Tab` 键可在所有可聚焦节点与边之间切换焦点。这些元素会自动获得 `tabIndex={0}` 属性，默认情况下还会设置 `role="group"` 以处理交互。
- **选择/取消选择**：按 `Enter` 或 `空格键` 选中聚焦的节点/边，按 `Escape` 键清除选择。
- **方向键移动节点**：当 `nodesDraggable` 和 `nodesFocusable` 同时为 true（默认值）时，可使用方向键移动已选节点。按住 `Shift` 键可加速移动。若设置 `disableKeyboardA11y={true}` 则会禁用方向键移动（但标签页聚焦和选择功能仍有效）。
- **自动平移**：当节点获得焦点时，React Flow 会自动平移画布使该节点进入可视区域，确保聚焦节点对用户可见。此行为可通过 [autoPanOnNodeFocus](/api-reference/react-flow#autopanonnodefocus) 属性切换。
- **ARIA 描述**：React Flow 会自动添加键盘导航的 ARIA 描述，可通过 [ariaLabelConfig](/api-reference/react-flow#arialabelconfig) 进行配置。

<Callout type="info">
  如需启用完整键盘无障碍功能，请确保 `nodesFocusable` 和 `edgesFocusable` 
  均设置为 `true`。若任一为 false，对应元素将无法通过键盘聚焦。
</Callout>

## 节点与边的 ARIA 角色

默认情况下，React Flow 为交互式元素使用语义化的 ARIA 角色。您可以通过 `ariaRole` 属性覆盖节点的角色。例如：

```js
const nodes = [
  {
    id: '1',
    data: { label: 'Hello' },
    ariaRole: 'button',
  },
];
<ReactFlow nodes={nodes} edges={[]} />;
```

默认情况下，若未设置角色，则会应用 `role="group"`。自定义 `ariaRole` 允许您匹配任何相关的 ARIA 角色（如 `"listitem"`、`"region"` 等），从而为辅助技术提供更完善的语义信息。

**注意：** `ariaRole` 会应用于节点包装器。如果自定义节点包含交互元素，请避免在节点本身上设置 `ariaRole: 'button'`，而应将适当的 ARIA 角色直接应用于交互元素。

### DOM 属性

要传递自定义 ARIA 属性或其他 DOM 层级属性（如 `aria-roledescription`、`data-\*`、`tabIndex` 等），可使用 `domAttributes` 属性。该属性适用于节点和边：

```
// Example for a node
{
  id: '2',
  data: { label: 'Accessible Node' },
  domAttributes: {
    'aria-roledescription': 'collapsible node',
    tabIndex: 0,
    'data-test-id': 'node-2',
  },
}

```

这使您能完全控制与无障碍相关的属性，同时保留 React Flow 内置的角色和行为。

## 本地化无障碍提示信息

React Flow 内置的无障碍文本（如键盘操作说明和实时更新）可通过 `<ReactFlow>` 的 [ariaLabelConfig](/api-reference/react-flow#arialabelconfig) 属性进行自定义或本地化。该属性接收一个对象，将消息键映射到字符串或函数。键名包括：

| 键名                                   | 默认值                                                                                                                                          |
| --------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
| `node.a11yDescription.default`          | 按回车或空格键选择节点。按删除键移除节点，按退出键取消操作。                                                                                   |
| `node.a11yDescription.keyboardDisabled` | 按回车或空格键选择节点。随后可使用方向键移动节点。按删除键移除节点，按退出键取消操作。                                                         |
| `node.a11yDescription.ariaLiveMessage`  | `Moved selected node {direction}. New position, x: {x}, y: {y}`                                                                                 |
| `edge.a11yDescription.default`          | 按回车或空格键选择连线。随后可按删除键移除连线或按退出键取消操作。                                                                             |
| `controls.ariaLabel`                    | 控制面板                                                                                                                                        |
| `controls.zoomIn.ariaLabel`             | 放大                                                                                                                                            |
| `controls.zoomOut.ariaLabel`            | 缩小                                                                                                                                            |
| `controls.fitView.ariaLabel`            | 适应视图                                                                                                                                        |
| `controls.interactive.ariaLabel`        | 切换交互模式                                                                                                                                    |
| `minimap.ariaLabel`                     | 缩略图                                                                                                                                          |
| `handle.ariaLabel`                      | 手柄                                                                                                                                            |

例如，要提供自定义或本地化文本：

```js
const ariaLabels = {
  'node.a11yDescription.default': 'Press [Enter] to select this node',
  'node.a11yDescription.keyboardDisabled': 'Keyboard navigation is disabled',
};
<ReactFlow nodes={nodes} edges={edges} ariaLabelConfig={ariaLabels}>
  <MiniMap />
  <Controls />
</ReactFlow>;
```

这会告知 React Flow 使用您提供的文本而非默认值。通过 [ariaLabelConfig](/api-reference/react-flow#arialabelconfig) 传递本地化字符串，可确保屏幕阅读器以用户语言播报信息。

## WCAG 2.1 AA

React Flow 提供的功能在正确实施时，可帮助您满足 WCAG 2.1 AA 的关键标准：

- **键盘操作**：React Flow 支持通过 `Tab` 键在节点和边之间导航，使用 `Enter`/`Space` 键进行交互，并通过方向键移动节点。这些功能有助于满足键盘可访问性要求。
- **屏幕阅读器**：通过语义化的 ARIA 角色和标签（如 `role="group"`、`aria-label` 和 `aria-roledescription`），React Flow 能创建可被清晰播报的图形节点/边。边组件包含可定制的 `aria-label`，节点也可设置适当的 `aria-label` 文本。
- **ARIA 动态区域**：动态更新通过 `aria-live` 区域进行播报。`A11yDescriptions` 组件包含一个 `aria-live="assertive"` 元素，用于通知用户节点移动，帮助满足状态消息的可访问性要求。
- **操作说明与焦点管理**：React Flow 提供上下文帮助，例如"按 Enter 或空格键选择节点…"等清晰指引。自动焦点管理确保聚焦节点时滚动至可视区域，满足输入辅助功能需求。

本指南有助于学习 [ARIA 最佳实践](https://www.w3.org/WAI/ARIA/apg/practices/read-me-first/)。