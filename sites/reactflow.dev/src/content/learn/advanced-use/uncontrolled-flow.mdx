---

description: React 中的非受控输入在内部管理自身状态。本指南展示如何设置和使用非受控流程。
---

import { Callout } from 'nextra/components';
import { RemoteCodeViewer } from 'xy-shared/server';

# 非受控流程

使用 React Flow 有两种方式——受控或非受控。受控意味着您需要自行管理节点和边的状态。在非受控流程中，节点和边的状态由 React Flow 内部处理。本节我们将展示如何操作非受控流程。

非受控流程的实现更为简单，因为您无需传递任何处理函数：

<RemoteCodeViewer route="learn/uncontrolled" framework="react" />

如您所见，我们通过传递 `defaultEdgeOptions` 来定义边具有动画效果。这很有帮助，因为您无法再使用 `onConnect` 处理函数为新创建的边传递自定义选项。尝试连接"Node B"和"Node C"，您会发现新创建的边具有动画效果。

## 更新节点和边

由于您的本地状态中不包含节点(node)和边(edge)，因此无法直接更新它们。为此，您需要使用[React Flow实例](/api-reference/types/react-flow-instance)，它提供了更新内部状态的函数。您可以通过`onInit`回调或更推荐的方式——使用[`useReactFlow`钩子](/api-reference/hooks/use-react-flow)来获取该实例。下面我们创建一个按钮，用于在随机位置添加新节点。为此，我们将用[`ReactFlowProvider`](/api-reference/react-flow-provider)包裹流程组件，并使用[`addNodes`函数](/api-reference/types/react-flow-instance#nodes-and-edges)。

<Callout>
  本示例中的`Flow`组件被`ReactFlowProvider`包裹，
  以便使用`useReactFlow`钩子。
</Callout>

<RemoteCodeViewer route="learn/uncontrolled-2" framework="react" />